{"ast":null,"code":"import _classCallCheck from \"/Users/maxencejoly/Desktop/termine\\u0301/W-JSC-502-MAR-2-2-irc-maxence.joly/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maxencejoly/Desktop/termine\\u0301/W-JSC-502-MAR-2-2-irc-maxence.joly/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/maxencejoly/Desktop/termine\\u0301/W-JSC-502-MAR-2-2-irc-maxence.joly/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/maxencejoly/Desktop/termine\\u0301/W-JSC-502-MAR-2-2-irc-maxence.joly/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/maxencejoly/Desktop/termine\\u0301/W-JSC-502-MAR-2-2-irc-maxence.joly/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/maxencejoly/Desktop/termine\\u0301/W-JSC-502-MAR-2-2-irc-maxence.joly/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/maxencejoly/Desktop/termine\\u0301/W-JSC-502-MAR-2-2-irc-maxence.joly/client/src/App.js\";\nimport React, { Component } from 'react';\nimport openSocket from 'socket.io-client';\nvar socket = openSocket('http://localhost:3001');\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      channelSelected: '#accueil',\n      username: 'invité',\n      usertemp: '',\n      temp: '',\n      tempMessage: '',\n      channels: [],\n      messages: [],\n      users: []\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePseudo = _this.handlePseudo.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMessage = _this.handleMessage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      /*\n      * Connexion d'un utilisateur\n      */\n      socket.on('newuser', function (user) {\n        _this2.setState({\n          messages: _this2.state.messages.concat({\n            channel: _this2.state.channelSelected,\n            author: 'system',\n            content: user.username + ' a rejoint le channel',\n            to: '',\n            chucho: 'no'\n          })\n        });\n      });\n      /*\n      * Deconnexion d'un utilisateur\n      */\n\n      socket.on('disuser', function (user) {\n        _this2.setState({\n          messages: _this2.state.messages.concat({\n            channel: _this2.state.channelSelected,\n            author: 'system',\n            content: user.username + ' a quitté le channel',\n            to: '',\n            chucho: 'no'\n          })\n        });\n      });\n      /*\n      * Affichage des utilisateurs\n      */\n\n      socket.on('listUsers', function (user) {\n        _this2.setState({\n          users: []\n        });\n\n        for (var i in user) {\n          _this2.setState({\n            users: _this2.state.users.concat(user[i])\n          });\n        }\n      });\n      /*\n      * Définir les messages\n      */\n\n      socket.on('newmsg', function (message) {\n        _this2.setState({\n          messages: _this2.state.messages.concat({\n            channel: message.messages.messages.channel,\n            author: message.messages.messages.author,\n            content: message.messages.messages.content,\n            to: message.messages.messages.to,\n            chucho: message.messages.messages.chucho\n          })\n        });\n      });\n      /*\n      * Réception des channels\n      */\n\n      socket.on('listChannels', function (channels) {\n        _this2.setState({\n          channels: []\n        });\n\n        for (var i in channels) {\n          _this2.setState({\n            channels: _this2.state.channels.concat(channels[i])\n          });\n        }\n      });\n    }\n    /*\n    * Pour la connexion\n    */\n\n  }, {\n    key: \"onChange\",\n    value: function onChange(event) {\n      this.setState({\n        usertemp: event.target.value\n      });\n    }\n  }, {\n    key: \"handlePseudo\",\n    value: function handlePseudo(event) {\n      event.preventDefault();\n      socket.emit('login', {\n        username: this.state.usertemp\n      });\n      this.setState({\n        username: this.state.usertemp\n      });\n    }\n    /*\n    * Fonction pour commande /msg\n    */\n\n  }, {\n    key: \"commandMsg\",\n    value: function commandMsg(tab) {\n      tab = tab.filter(function (word) {\n        return word !== tab[0];\n      });\n      this.setState({\n        tempMessage: {\n          channel: this.state.channelSelected,\n          author: this.state.username,\n          content: tab.filter(function (word) {\n            return word !== tab[0];\n          }).join(' '),\n          to: tab[0],\n          chucho: 'yes'\n        }\n      });\n    }\n    /*\n    * Pour l'envoi de message\n    */\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        temp: event.target.value\n      });\n      var tab = event.target.value.split(' ');\n      var tabBegin = tab[0].split('');\n\n      if (tab[0] === \"/help\") {\n        this.commandHelp();\n        return false;\n      }\n\n      if (tab[0] === '/msg') {\n        this.commandMsg(tab);\n        return false;\n      }\n\n      if (tab[0] === '/nick') {\n        return false;\n      }\n\n      if (tab[0] === '/create') {\n        return false;\n      }\n\n      if (tab[0] === '/join') {\n        return false;\n      }\n\n      if (tabBegin[0] !== \"/\") {\n        this.setState({\n          tempMessage: {\n            channel: this.state.channelSelected,\n            author: this.state.username,\n            content: event.target.value,\n            to: '',\n            chucho: 'no'\n          }\n        });\n      }\n    }\n    /*\n    * Confirmation du formulaire / envoi de message\n    */\n\n  }, {\n    key: \"handleMessage\",\n    value: function handleMessage(event) {\n      event.preventDefault();\n      var tab = this.state.temp.split(' ');\n\n      if (tab[0] === '/nick') {\n        if (tab[1] !== undefined && tab[1] !== '') {\n          this.commandName(tab, event);\n        }\n\n        this.setState({\n          temp: ''\n        });\n        return false;\n      }\n\n      if (tab[0] === '/create') {\n        if (tab[1] !== undefined && tab[1] !== '') {\n          this.commandCreate(tab);\n        }\n\n        this.setState({\n          temp: ''\n        });\n        return false;\n      }\n\n      if (tab[0] === '/join') {\n        if (tab[1] !== undefined && tab[1] !== '') {\n          this.commandJoin(tab);\n        }\n      }\n\n      socket.emit('newmessage', {\n        messages: this.state.tempMessage\n      });\n      this.setState({\n        temp: ''\n      });\n    }\n    /*\n    * Afficher les messages\n    */\n\n  }, {\n    key: \"affichMessage\",\n    value: function affichMessage() {\n      var _this3 = this;\n\n      var tab = this.state.messages.filter(function (messages) {\n        return messages.channel === _this3.state.channelSelected;\n      });\n      return tab.map(function (message) {\n        if (message.author === 'system') {\n          return React.createElement(\"span\", {\n            className: \"msg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, message.content, \" \", React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          })));\n        }\n\n        if (message.to !== '' && message.to === _this3.state.username) {\n          return React.createElement(\"span\", {\n            className: \"msg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, React.createElement(\"em\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, message.author, \" ta dit \"), \" : \", message.content, \" \", React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }));\n        }\n\n        if (message.to !== '' && message.author === _this3.state.username) {\n          return React.createElement(\"span\", {\n            className: \"msg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          }, React.createElement(\"em\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          }, \" Vous avez chuchot\\xE9 \\xE0 \", message.to), \" : \", message.content, \" \", React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          }));\n        }\n\n        if (message.author !== 'system' && message.chucho === 'no') {\n          return React.createElement(\"span\", {\n            className: \"msg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          }, React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          }, message.author), \" : \", message.content, \" \", React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          }));\n        }\n      });\n    }\n    /*\n    *  Afficher les membres\n    */\n\n  }, {\n    key: \"affichMembers\",\n    value: function affichMembers() {\n      return this.state.users.map(function (user) {\n        return React.createElement(\"span\", {\n          className: \"users\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, \" \", user, \" \");\n      });\n    }\n    /*\n    *  Afficher les channels\n    */\n\n  }, {\n    key: \"affichChannels\",\n    value: function affichChannels() {\n      var _this4 = this;\n\n      return this.state.channels.map(function (channel) {\n        return React.createElement(\"span\", {\n          className: \"chan\",\n          value: channel,\n          onClick: function onClick(event) {\n            _this4.setState({\n              channelSelected: event.target.getAttribute('value')\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, channel);\n      });\n    }\n    /*\n    * Rendu\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.username === 'invité') {\n        return React.createElement(\"div\", {\n          className: \"flex justify-center text-center p-8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"username\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, \"Bienvenue sur My_IRC\"), React.createElement(\"div\", {\n          className: \"p-8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244\n          },\n          __self: this\n        }, \"Votre pseudo :\")), React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"text-sm sm:text-base text-center relative w-full border rounded placeholder-gray-400 focus:border-indigo-400 focus:outline-none py-2 pr-2\",\n          type: \"text\",\n          onChange: this.onChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: this.handlePseudo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251\n          },\n          __self: this\n        }, \"Se connecter\"))));\n      }\n\n      if (this.state.username !== '') {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"flex justify-center py-8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"max-w-sm bg-white border-2 border-gray-300 p-6 rounded-md tracking-wide shadow-lg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"rounded text-center relative -mb-px block border  border-grey px-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262\n          },\n          __self: this\n        }, \"channels \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }), this.affichChannels()), React.createElement(\"div\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, React.createElement(\"em\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, \"Bienvenue \", this.state.username, \" sur le channel \", this.state.channelSelected)))), React.createElement(\"div\", {\n          className: \"flex justify-center rounded-lg  p-16\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"grid place-items-center w-4/5 mx-auto p-10 my-20 sm:my-auto rounded-xl shadow-2xl space-y-5 text-center \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          id: \"content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, this.affichMessage(), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }))))), React.createElement(\"div\", {\n          className: \"flex justify-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"border border-black rounded-lg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"sendForm\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          id: \"msg\",\n          value: this.state.temp,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: this.handleMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, \"Envoyer\"))))), React.createElement(\"div\", {\n          className: \"list-members\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"members\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, \"Liste des membres\", this.affichMembers())));\n      }\n\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \" \", this.state.username, \" est rentr\\xE9 sur le channel\");\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/maxencejoly/Desktop/terminé/W-JSC-502-MAR-2-2-irc-maxence.joly/client/src/App.js"],"names":["React","Component","openSocket","socket","App","props","state","channelSelected","username","usertemp","temp","tempMessage","channels","messages","users","onChange","bind","handlePseudo","handleChange","handleMessage","on","user","setState","concat","channel","author","content","to","chucho","i","message","event","target","value","preventDefault","emit","tab","filter","word","join","split","tabBegin","commandHelp","commandMsg","undefined","commandName","commandCreate","commandJoin","map","getAttribute","affichChannels","affichMessage","affichMembers"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport openSocket from 'socket.io-client';\nconst socket = openSocket('http://localhost:3001');\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            channelSelected: '#accueil',\n            username : 'invité',\n            usertemp : '',\n            temp : '',\n            tempMessage : '',\n            channels: [],\n            messages : [],\n            users : []\n        }\n        this.onChange = this.onChange.bind(this);\n        this.handlePseudo = this.handlePseudo.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleMessage = this.handleMessage.bind(this);\n    }\n\n    componentDidMount() {\n\n        /*\n        * Connexion d'un utilisateur\n        */\n        socket.on('newuser', (user) => {\n            this.setState({\n                messages : this.state.messages.concat({\n                    channel: this.state.channelSelected,\n                    author: 'system',\n                    content: user.username + ' a rejoint le channel',\n                    to: '',\n                    chucho: 'no'\n                })\n            })\n        });\n\n        /*\n        * Deconnexion d'un utilisateur\n        */\n        socket.on('disuser', (user) => {\n            this.setState({\n                messages : this.state.messages.concat({\n                    channel: this.state.channelSelected,\n                    author: 'system',\n                    content: user.username + ' a quitté le channel',\n                    to: '',\n                    chucho: 'no'\n                })\n            })\n        });\n\n        /*\n        * Affichage des utilisateurs\n        */\n        socket.on('listUsers', (user) => {\n            this.setState({users : []});\n            for(var i in user) {\n                this.setState({users : this.state.users.concat(user[i])});\n            }\n        })\n\n        /*\n        * Définir les messages\n        */\n        socket.on('newmsg', (message) => {\n            this.setState({\n                messages : this.state.messages.concat({\n                    channel: message.messages.messages.channel,\n                    author: message.messages.messages.author,\n                    content: message.messages.messages.content,\n                    to: message.messages.messages.to,\n                    chucho: message.messages.messages.chucho\n                })\n            })\n        })\n\n        /*\n        * Réception des channels\n        */\n        socket.on('listChannels', (channels) => {\n            this.setState({channels : []});\n            for(var i in channels) {\n                this.setState({channels : this.state.channels.concat(channels[i])});\n            }\n        })\n    }\n\n    /*\n    * Pour la connexion\n    */\n    onChange(event) {\n        this.setState({ usertemp: event.target.value })\n    }\n\n    handlePseudo(event) {\n        event.preventDefault();\n        socket.emit('login', { username : this.state.usertemp })\n        this.setState({ username: this.state.usertemp })\n    }\n\n    /*\n    * Fonction pour commande /msg\n    */\n    commandMsg(tab) {\n        tab = tab.filter(word => word !== tab[0]);\n        this.setState({\n            tempMessage : {\n                channel: this.state.channelSelected,\n                author: this.state.username,\n                content: tab.filter(word => word !== tab[0]).join(' '),\n                to: tab[0],\n                chucho : 'yes'\n            }\n        });\n    }\n\n\n    /*\n    * Pour l'envoi de message\n    */\n    handleChange(event) {\n        this.setState({ temp: event.target.value });\n        var tab = event.target.value.split(' ');\n        var tabBegin = tab[0].split('');\n        if(tab[0] === \"/help\") {\n            this.commandHelp();\n            return false;\n        }\n        if(tab[0] === '/msg') {\n            this.commandMsg(tab);\n            return false;\n        }\n        if(tab[0] === '/nick') {\n            return false;\n        }\n        if(tab[0] === '/create') {\n            return false;\n        }\n        if(tab[0] === '/join') {\n            return false;\n        }\n        if(tabBegin[0] !== \"/\") {\n            this.setState({\n                tempMessage: {\n                    channel: this.state.channelSelected,\n                    author : this.state.username,\n                    content: event.target.value,\n                    to: '',\n                    chucho: 'no'\n                }\n            })\n        }\n    }\n\n    /*\n    * Confirmation du formulaire / envoi de message\n    */\n    handleMessage(event) {\n        event.preventDefault();\n        var tab = this.state.temp.split(' ');\n        if(tab[0] === '/nick') {\n            if(tab[1] !== undefined && tab[1] !== '') {\n                    this.commandName(tab, event);\n            }\n            this.setState({temp: ''});\n            return false;\n        }\n        if(tab[0] === '/create') {\n            if(tab[1] !== undefined && tab[1] !== '') {\n                this.commandCreate(tab);\n            }\n            this.setState({temp: ''});\n            return false;\n        }\n        if(tab[0] === '/join') {\n            if(tab[1] !== undefined && tab[1] !== '') {\n                this.commandJoin(tab);\n            }\n        }\n        socket.emit('newmessage', { messages: this.state.tempMessage });\n        this.setState({temp: ''});\n    }\n\n    /*\n    * Afficher les messages\n    */\n    affichMessage() {\n        var tab = this.state.messages.filter( messages => messages.channel === this.state.channelSelected);\n        return tab.map(message => {\n            if(message.author === 'system') {\n                return <span className=\"msg\"><strong>{message.content} <br/></strong></span>\n            }\n            if(message.to !== '' && message.to === this.state.username) {\n                return <span className=\"msg\"><em>{message.author} ta dit </em> : {message.content} <br/></span>\n            }\n            if(message.to !== '' && message.author === this.state.username) {\n                return <span className=\"msg\"><em> Vous avez chuchoté à {message.to}</em> : {message.content} <br/></span>\n            }\n            if(message.author !== 'system' && message.chucho === 'no') {\n                return <span className=\"msg\"><strong>{message.author}</strong> : {message.content} <br/></span>\n            }\n        });\n   }\n\n   /*\n   *  Afficher les membres\n   */\n   affichMembers() {\n       return this.state.users.map(user => {\n           return <span className=\"users\"> {user} </span>\n       });\n   }\n\n   /*\n   *  Afficher les channels\n   */\n   affichChannels() {\n       return this.state.channels.map(channel => {\n           return <span\n                className=\"chan\"\n                value={channel}\n                onClick={(event) => { this.setState({channelSelected: event.target.getAttribute('value')})}}>\n                    {channel}\n                </span>\n       })\n   }\n\n   /*\n   * Rendu\n   */\n\n    render() {\n        if(this.state.username === 'invité') {\n            return (\n                <div className=\"flex justify-center text-center p-8\">\n                    <div className=\"username\">\n                        <h1>Bienvenue sur My_IRC</h1>\n                        <div className=\"p-8\">\n                            <span className=\"label\">\n                                Votre pseudo :\n                            </span>\n                        </div>\n\n                            <form>\n                                <input className='text-sm sm:text-base text-center relative w-full border rounded placeholder-gray-400 focus:border-indigo-400 focus:outline-none py-2 pr-2' type=\"text\" onChange={ this.onChange}/>\n                                <button onClick={this.handlePseudo}>Se connecter</button>\n                            </form>\n                         </div>\n                </div>\n            )\n        }\n        if(this.state.username !== '') {\n            return (\n                <div className=\"App\">\n                    <div className=\"flex justify-center py-8\">\n                        <div className=\"max-w-sm bg-white border-2 border-gray-300 p-6 rounded-md tracking-wide shadow-lg\">\n                            <div className=\"rounded text-center relative -mb-px block border  border-grey px-4\">\n                                channels <br/>\n                                {this.affichChannels()}\n                            </div>\n                            <div className=\"text-center\">\n                                <em>Bienvenue { this.state.username } sur le channel {this.state.channelSelected}</em>\n\n                              </div>\n                         </div>\n                    </div>\n                    <div className=\"flex justify-center rounded-lg  p-16\">\n                        <div className=\"grid place-items-center w-4/5 mx-auto p-10 my-20 sm:my-auto rounded-xl shadow-2xl space-y-5 text-center \">\n                            <div>\n                                <div id=\"content\">\n                                    {this.affichMessage()}\n                                    <br/>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    <div className=\"flex justify-center\">\n                        <span className=\"border border-black rounded-lg\">\n                            <div className=\"sendForm\">\n                                <form >\n                                    <input id=\"msg\" value={this.state.temp} onChange={ this.handleChange }/>\n                                    <button onClick={this.handleMessage}>Envoyer</button>\n                                </form>\n                            </div>\n                        </span>\n                    </div>\n                    <div className=\"list-members\">\n                        <div className=\"members\">\n                            Liste des membres\n                            {this.affichMembers()}\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n        return (<p> {this.state.username} est rentré sur le channel</p>);\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}